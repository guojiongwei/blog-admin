import{m as s,n as a}from"./index.19719ba4.js";import{M as o}from"./index.c15756fd.js";var n=function(){var e=this,i=e.$createElement,l=e._self._c||i;return l("article",[l("h2",[e._v("\u6DFB\u52A0\u535A\u5BA2")]),l("div",{staticClass:"box"},[l("el-form",{ref:"form",staticClass:"form",attrs:{model:e.info,rules:e.rules,"label-width":"100px"}},[l("el-form-item",{attrs:{label:"\u535A\u5BA2\u7C7B\u578B",prop:"type"}},[l("el-select",{staticClass:"block",attrs:{multiple:"",clearable:"",placeholder:"\u8BF7\u9009\u62E9\u535A\u5BA2\u7C7B\u578B"},model:{value:e.info.type,callback:function(t){e.$set(e.info,"type",t)},expression:"info.type"}},e._l(e.blogTypes,function(t){return l("el-option",{key:t.name,attrs:{label:t.name,value:t.name}})}),1)],1),l("el-form-item",{attrs:{label:"\u6587\u7AE0\u6807\u9898",prop:"title"}},[l("el-input",{attrs:{type:"text"},model:{value:e.info.title,callback:function(t){e.$set(e.info,"title",t)},expression:"info.title"}})],1),l("el-form-item",{attrs:{label:"\u6587\u7AE0\u63CF\u8FF0",prop:"desc"}},[l("el-input",{attrs:{type:"textarea"},model:{value:e.info.desc,callback:function(t){e.$set(e.info,"desc",t)},expression:"info.desc"}})],1),l("el-form-item",{attrs:{label:"\u6587\u7AE0\u5185\u5BB9",prop:"markdown"}},[l("Markdown",{model:{value:e.info.markdown,callback:function(t){e.$set(e.info,"markdown",t)},expression:"info.markdown"}})],1),l("el-form-item",{attrs:{label:"\u7EA7\u522B",prop:"album"}},[l("el-select",{staticClass:"block",attrs:{placeholder:"\u8BF7\u9009\u62E9\u7EA7\u522B"},model:{value:e.info.level,callback:function(t){e.$set(e.info,"level",t)},expression:"info.level"}},e._l([1,2,3,4,5,6],function(t){return l("el-option",{key:t,attrs:{label:t,value:t}})}),1)],1),l("el-form-item",{attrs:{label:"\u6765\u6E90",prop:"source"}},[l("el-select",{staticClass:"block",attrs:{placeholder:"\u8BF7\u9009\u62E9\u6765\u6E90"},model:{value:e.info.source,callback:function(t){e.$set(e.info,"source",t)},expression:"info.source"}},e._l(e.sources,function(t){return l("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),l("el-form-item",{attrs:{label:"Github",prop:"github"}},[l("el-input",{attrs:{type:"text"},model:{value:e.info.github,callback:function(t){e.$set(e.info,"github",t)},expression:"info.github"}})],1),l("el-form-item",{attrs:{label:"\u53D1\u5E03\u65F6\u95F4",prop:"releaseTime"}},[l("el-date-picker",{staticClass:"block",attrs:{type:"date",placeholder:"\u9009\u62E9\u53D1\u5E03\u65E5\u671F"},model:{value:e.info.releaseTime,callback:function(t){e.$set(e.info,"releaseTime",t)},expression:"info.releaseTime"}})],1),l("el-form-item",{staticClass:"left-item",attrs:{label:"\u662F\u5426\u53EF\u89C1",prop:"isVisible"}},[l("el-switch",{model:{value:e.info.isVisible,callback:function(t){e.$set(e.info,"isVisible",t)},expression:"info.isVisible"}})],1),l("el-form-item",[l("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.submitForm("form")}}},[e._v("\u7ACB\u5373\u521B\u5EFA")])],1)],1)],1)])},c=[];const u={components:{Markdown:o},data(){return{info:{type:["JavaScript"],title:"",desc:"",html:"",markdown:"",level:1,source:1,github:"",isVisible:!0,releaseTime:new Date},loading:!1,rules:{type:[{required:!0,message:"\u8BF7\u9009\u62E9\u81F3\u5C11\u9009\u62E9\u4E00\u4E2A\u6587\u7AE0\u7C7B\u578B",trigger:"change",type:"array"}],title:[{required:!0,message:"\u8BF7\u586B\u5199\u6587\u7AE0\u6807\u9898",trigger:"blur"}],desc:[{required:!0,message:"\u8BF7\u586B\u5199\u6587\u7AE0\u63CF\u8FF0",trigger:"blur"}],isVisible:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"change",type:"boolean"}],releaseTime:[{required:!0,message:"\u8BF7\u9009\u62E9\u6587\u7AE0\u7684\u53D1\u5E03\u65F6\u95F4",trigger:"change",type:"date"}]}}},methods:{submitForm(e){if(this.loading=!0,!this.info.markdown){this.$message.warn("\u8BF7\u586B\u5199\u6587\u7AE0\u5185\u5BB9");return}this.$refs[e].validate(async i=>{if(i)try{this.info.html=this.info.markdown,await this.$store.dispatch("addBlog",this.info),this.loading=!1,this.$router.push("/article/list")}catch{this.loading=!1}else return console.log("error submit!!"),this.loading=!1,!1})}},computed:{...s(["blogTypes","sources"])}},r={};var f=a(u,n,c,!1,m,"476441a6",null,null);function m(e){for(let i in r)this[i]=r[i]}var b=function(){return f.exports}();export{b as default};
